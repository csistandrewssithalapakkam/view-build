import{a as q}from"./chunk-WSDOHZRH.js";import{a as z,b,c as G,d as H,e as B,f as O,g as A,k as P,l as R,m as L}from"./chunk-T443B6IA.js";import{Fa as I,Ib as $,Nb as j,Oa as E,Pa as h,Ra as k,S,Sa as V,Ta as x,Ua as t,Va as n,Wa as s,X as p,Y as u,Z as _,_ as N,_a as w,a as y,ab as c,b as C,cb as m,ea as M,ib as o,jb as v,pb as D,qb as T,sa as l,ub as F}from"./chunk-WFMH5ZIS.js";var U=(r,i)=>i.id;function K(r,i){if(r&1&&s(0,"img",13),r&2){let e=m().$implicit;x("ngSrc",e.image)("alt",e.title)}}function Q(r,i){r&1&&(t(0,"div",14),_(),t(1,"svg",22),s(2,"path",23),n()())}function W(r,i){if(r&1){let e=w();t(0,"div",9),E(1,K,1,2,"img",13)(2,Q,3,0,"div",14),t(3,"div",15)(4,"h4",16),o(5),n(),t(6,"p",17),o(7),D(8,"date"),n(),t(9,"p",18),o(10),n()(),t(11,"div",19)(12,"button",20),c("click",function(){let a=p(e).$implicit,g=m();return u(g.openModal(a))}),o(13,"Edit"),n(),t(14,"button",21),c("click",function(){let a=p(e).$implicit,g=m();return u(g.deleteEvent(a.id))}),o(15,"Delete"),n()()()}if(r&2){let e=i.$implicit;l(),h(e.image?1:2),l(4),v(e.title),l(2),v(T(8,4,e.date,"fullDate")),l(3),v(e.description)}}function X(r,i){r&1&&(t(0,"div",10)(1,"p",24),o(2,"No upcoming events found."),n()())}function Y(r,i){if(r&1&&s(0,"img",13),r&2){let e=m().$implicit;x("ngSrc",e.image)("alt",e.title)}}function Z(r,i){r&1&&(t(0,"div",14),_(),t(1,"svg",22),s(2,"path",23),n()())}function ee(r,i){if(r&1){let e=w();t(0,"div",11),E(1,Y,1,2,"img",13)(2,Z,3,0,"div",14),t(3,"div",15)(4,"h4",16),o(5),n(),t(6,"p",25),o(7),D(8,"date"),n(),t(9,"p",18),o(10),n()(),t(11,"div",19)(12,"button",20),c("click",function(){let a=p(e).$implicit,g=m();return u(g.openModal(a))}),o(13,"Edit"),n(),t(14,"button",21),c("click",function(){let a=p(e).$implicit,g=m();return u(g.deleteEvent(a.id))}),o(15,"Delete"),n()()()}if(r&2){let e=i.$implicit;l(),h(e.image?1:2),l(4),v(e.title),l(2),v(T(8,4,e.date,"fullDate")),l(3),v(e.description)}}function te(r,i){r&1&&(t(0,"div",10)(1,"p",24),o(2,"No past events to show."),n()())}function ie(r,i){if(r&1){let e=w();t(0,"div",26),c("click",function(){p(e);let a=m();return u(a.closeModal())}),t(1,"div",27),c("click",function(a){return p(e),u(a.stopPropagation())}),t(2,"form",28),c("ngSubmit",function(){p(e);let a=m();return u(a.saveEvent())}),t(3,"div",29)(4,"h3",30),o(5),n()(),t(6,"div",31)(7,"div")(8,"label",32),o(9,"Event Title"),n(),s(10,"input",33),n(),t(11,"div")(12,"label",34),o(13,"Date"),n(),s(14,"input",35),n(),t(15,"div")(16,"label",36),o(17,"Description"),n(),s(18,"textarea",37),n(),t(19,"div")(20,"label",38),o(21,"Image URL (Optional)"),n(),s(22,"input",39),n()(),t(23,"div",40)(24,"button",41),c("click",function(){p(e);let a=m();return u(a.closeModal())}),o(25," Cancel "),n(),t(26,"button",42),o(27," Save Event "),n()()()()()}if(r&2){let e=m();l(2),x("formGroup",e.eventForm),l(3),v(e.editingEvent()?"Edit Event":"Add New Event"),l(21),x("disabled",e.eventForm.invalid)}}var f=class f{constructor(){this.fb=S(R);this.eventsService=S(q);this.isModalVisible=M(!1);this.editingEvent=M(null);this.today=new Date;this.eventForm=this.fb.group({title:["",b.required],date:["",b.required],description:["",b.required],image:["",[b.pattern("https?://.+")]]});this.upcomingEvents=F(()=>(this.today.setHours(0,0,0,0),this.eventsService.events().filter(i=>new Date(i.date)>=this.today).sort((i,e)=>new Date(i.date).getTime()-new Date(e.date).getTime())));this.pastEvents=F(()=>(this.today.setHours(0,0,0,0),this.eventsService.events().filter(i=>new Date(i.date)<this.today).sort((i,e)=>new Date(e.date).getTime()-new Date(i.date).getTime())))}openModal(i=null){if(this.editingEvent.set(i),i){let e=new Date(i.date).toISOString().substring(0,10);this.eventForm.patchValue(C(y({},i),{date:e}))}else this.eventForm.reset();this.isModalVisible.set(!0)}closeModal(){this.isModalVisible.set(!1),this.editingEvent.set(null),this.eventForm.reset()}saveEvent(){if(this.eventForm.invalid)return;let i=this.eventForm.getRawValue(),e={title:i.title,date:new Date(new Date(i.date).valueOf()+new Date().getTimezoneOffset()*60*1e3),description:i.description,image:i.image||void 0};this.editingEvent()?this.eventsService.updateEvent(C(y({},e),{id:this.editingEvent().id})):this.eventsService.addEvent(e),this.closeModal()}deleteEvent(i){confirm("Are you sure you want to delete this event?")&&this.eventsService.deleteEvent(i)}};f.\u0275fac=function(e){return new(e||f)},f.\u0275cmp=I({type:f,selectors:[["app-event-manager"]],decls:23,vars:3,consts:[[1,"bg-white","p-8","rounded-lg","shadow"],[1,"flex","flex-col","sm:flex-row","justify-between","sm:items-center","mb-6","gap-4"],[1,"text-2xl","font-bold","text-gray-800"],[1,"px-4","py-2","bg-green-500","text-white","font-semibold","rounded-md","hover:bg-green-600","transition-colors","flex","items-center","gap-2","self-start","sm:self-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"],[1,"mb-10"],[1,"text-lg","font-semibold","text-gray-700","mb-4","border-b","pb-2"],[1,"space-y-4"],[1,"bg-gray-50","border","rounded-lg","p-4","flex","flex-col","md:flex-row","gap-4"],[1,"text-center","py-8","px-4","border-2","border-dashed","rounded-lg"],[1,"bg-gray-50","border","rounded-lg","p-4","flex","flex-col","md:flex-row","gap-4","opacity-70"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm"],["width","200","height","120",1,"w-full","md:w-48","h-32","object-cover","rounded-md","flex-shrink-0",3,"ngSrc","alt"],[1,"w-full","md:w-48","h-32","bg-gray-200","rounded-md","flex-shrink-0","flex","items-center","justify-center"],[1,"flex-grow"],[1,"text-md","font-bold","text-gray-800"],[1,"text-sm","font-semibold","text-warm-gold"],[1,"text-sm","text-gray-600","mt-2","line-clamp-2"],[1,"flex-shrink-0","flex","flex-row","md:flex-col","gap-2","justify-end","pt-2"],[1,"px-3","py-1","bg-blue-500","text-white","rounded-md","hover:bg-blue-600","transition-colors","text-sm",3,"click"],[1,"px-3","py-1","bg-red-500","text-white","rounded-md","hover:bg-red-600","transition-colors","text-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-10","w-10","text-gray-400"],["fill-rule","evenodd","d","M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule","evenodd"],[1,"text-gray-500"],[1,"text-sm","font-semibold","text-gray-500"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm",3,"click"],[1,"bg-white","rounded-lg","shadow-2xl","w-full","max-w-2xl","m-4",3,"click"],[3,"ngSubmit","formGroup"],[1,"p-6","border-b"],[1,"text-xl","font-bold","font-serif","text-gray-800"],[1,"p-6","space-y-4","max-h-[70vh]","overflow-y-auto"],["for","title",1,"block","text-sm","font-medium","text-gray-700"],["id","title","type","text","formControlName","title","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["id","date","type","date","formControlName","date","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","formControlName","description","rows","5","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],["for","image",1,"block","text-sm","font-medium","text-gray-700"],["id","image","type","url","formControlName","image",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],[1,"p-6","bg-gray-50","flex","justify-end","gap-3","rounded-b-lg"],["type","button",1,"px-4","py-2","bg-gray-200","text-gray-800","rounded-md","hover:bg-gray-300","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","bg-primary-blue","text-white","rounded-md","hover:bg-accent-blue","transition-colors","disabled:bg-gray-400",3,"disabled"]],template:function(e,d){e&1&&(t(0,"section",0)(1,"div",1)(2,"h2",2),o(3,"Manage Events"),n(),t(4,"button",3),c("click",function(){return d.openModal()}),_(),t(5,"svg",4),s(6,"path",5),n(),o(7," Add Event "),n()(),N(),t(8,"div",6)(9,"h3",7),o(10,"Upcoming Events"),n(),t(11,"div",8),k(12,W,16,7,"div",9,U,!1,X,3,0,"div",10),n()(),t(15,"div")(16,"h3",7),o(17,"Past Events"),n(),t(18,"div",8),k(19,ee,16,7,"div",11,U,!1,te,3,0,"div",10),n()()(),E(22,ie,28,3,"div",12)),e&2&&(l(12),V(d.upcomingEvents()),l(7),V(d.pastEvents()),l(3),h(d.isModalVisible()?22:-1))},dependencies:[L,B,z,G,H,P,O,A,j,$],encapsulation:2,changeDetection:0});var J=f;export{J as EventManagerComponent};
