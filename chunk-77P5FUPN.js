import{a as j}from"./chunk-X57GPQ3H.js";import{a as A,b as x,c as O,d as $,e as q,f as G,g as P,h as z,i as R,j as B,k as J,l as L,m as H}from"./chunk-T443B6IA.js";import{Fa as T,Nb as I,Oa as _,Pa as S,Qa as F,Ra as v,S as h,Sa as w,Ta as g,Ua as i,Va as t,Wa as m,X as u,Y as f,Z as N,_ as V,_a as D,ab as s,cb as p,ea as M,hb as y,ib as r,jb as b,sa as d,ub as U}from"./chunk-WFMH5ZIS.js";var K=(l,o)=>o.id;function Q(l,o){if(l&1&&(i(0,"span",17),r(1),t()),l&2){let e=p().$implicit,n=p();d(),b(n.months[e.mappedMonth])}}function W(l,o){l&1&&(i(0,"span",18),r(1,"Unmapped"),t())}function X(l,o){if(l&1&&(i(0,"div",10),m(1,"img",13),i(2,"div",14)(3,"div",15)(4,"h3",16),r(5),t(),_(6,Q,2,1,"span",17)(7,W,2,0,"span",18),t(),i(8,"p",19),r(9),t()()()),l&2){let e=o.$implicit;d(),g("ngSrc",e.imageUrl||"https://picsum.photos/150/150?grayscale")("alt",e.title),d(4),b(e.title),d(),S(e.mappedMonth!==void 0&&e.mappedMonth!==null?6:7),d(3),b(e.shortStory)}}function Z(l,o){l&1&&(i(0,"div",11)(1,"p",20),r(2,"No missionary stories found. Add one to get started!"),t()())}function ee(l,o){if(l&1&&(i(0,"option",39),r(1),t()),l&2){let e=o.$implicit,n=o.$index;g("value",n),d(),b(e)}}function te(l,o){if(l&1){let e=D();i(0,"div",21),s("click",function(){u(e);let a=p();return f(a.closeModal())}),i(1,"div",22),s("click",function(a){return u(e),f(a.stopPropagation())}),i(2,"form",23),s("ngSubmit",function(){u(e);let a=p();return f(a.saveStory())}),i(3,"div",24)(4,"h3",25),r(5,"Add New Missionary Story"),t()(),i(6,"div",26)(7,"div")(8,"label",27),r(9,"Name (Title)"),t(),m(10,"input",28),t(),i(11,"div")(12,"label",29),r(13,"Missionary Image URL (Optional)"),t(),m(14,"input",30),t(),i(15,"div")(16,"label",31),r(17,"Short Story (Max 1000 characters)"),t(),m(18,"textarea",32),t(),i(19,"div")(20,"label",33),r(21,"Detailed Story (Optional)"),t(),m(22,"textarea",34),i(23,"p",35),r(24,"You can separate paragraphs by pressing Enter."),t()(),i(25,"div")(26,"label",36),r(27,"Map to Month (Optional)"),t(),i(28,"select",37)(29,"option",38),r(30,"None"),t(),v(31,ee,2,2,"option",39,F),t()()(),i(33,"div",40)(34,"button",41),s("click",function(){u(e);let a=p();return f(a.closeModal())}),r(35," Cancel "),t(),i(36,"button",42),r(37," Save Story "),t()()()()()}if(l&2){let e=p();d(2),g("formGroup",e.storyForm),d(29),w(e.months),d(5),g("disabled",e.storyForm.invalid)}}var c=class c{constructor(){this.fb=h(L);this.missionaryService=h(j);this.isModalVisible=M(!1);this.filter=M("all");this.months=["January","February","March","April","May","June","July","August","September","October","November","December"];this.storyForm=this.fb.group({title:["",x.required],imageUrl:["",[x.pattern("https?://.+")]],shortStory:["",[x.required,x.maxLength(1e3)]],detailedStory:[""],mappedMonth:[""]});this.filteredStories=U(()=>{let o=this.missionaryService.stories(),e=this.filter(),n=o;return e==="mapped"?n=o.filter(a=>a.mappedMonth!==void 0&&a.mappedMonth!==null):e==="unmapped"&&(n=o.filter(a=>a.mappedMonth===void 0||a.mappedMonth===null)),[...n].sort((a,C)=>{let k=a.mappedMonth===void 0||a.mappedMonth===null,E=C.mappedMonth===void 0||C.mappedMonth===null;return k&&!E?-1:!k&&E?1:0})})}openModal(){this.storyForm.reset({mappedMonth:""}),this.isModalVisible.set(!0)}closeModal(){this.isModalVisible.set(!1)}saveStory(){if(this.storyForm.invalid)return;let o=this.storyForm.getRawValue(),e={title:o.title,imageUrl:o.imageUrl||void 0,shortStory:o.shortStory,detailedStory:o.detailedStory||void 0,mappedMonth:o.mappedMonth?parseInt(o.mappedMonth,10):void 0};e.mappedMonth!==void 0&&(e.mappedMonth<0||e.mappedMonth>11)&&(e.mappedMonth=void 0),this.missionaryService.addStory(e),this.closeModal()}};c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=T({type:c,selectors:[["app-mission-manager"]],decls:22,vars:20,consts:[[1,"bg-white","p-8","rounded-lg","shadow"],[1,"flex","flex-col","sm:flex-row","justify-between","sm:items-center","mb-6","gap-4"],[1,"text-2xl","font-bold","text-gray-800"],[1,"px-4","py-2","bg-green-500","text-white","font-semibold","rounded-md","hover:bg-green-600","transition-colors","flex","items-center","gap-2","self-start","sm:self-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"],[1,"mb-6","flex","justify-start","items-center","gap-2"],[1,"font-semibold","text-gray-700"],[1,"px-3","py-1","text-sm","rounded-full","transition-colors",3,"click"],[1,"space-y-4"],[1,"bg-gray-50","border","rounded-lg","p-4","flex","flex-col","md:flex-row","gap-4"],[1,"text-center","py-8","px-4","border-2","border-dashed","rounded-lg"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm"],["width","150","height","150",1,"w-full","md:w-36","h-36","object-cover","rounded-md","flex-shrink-0",3,"ngSrc","alt"],[1,"flex-grow"],[1,"flex","justify-between","items-start"],[1,"text-lg","font-bold","text-gray-800"],[1,"text-xs","font-semibold","bg-green-200","text-green-800","px-2","py-1","rounded-full"],[1,"text-xs","font-semibold","bg-yellow-200","text-yellow-800","px-2","py-1","rounded-full"],[1,"text-sm","text-gray-600","mt-2","line-clamp-3"],[1,"text-gray-500"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm",3,"click"],[1,"bg-white","rounded-lg","shadow-2xl","w-full","max-w-2xl","m-4",3,"click"],[3,"ngSubmit","formGroup"],[1,"p-6","border-b"],[1,"text-xl","font-bold","font-serif","text-gray-800"],[1,"p-6","space-y-4","max-h-[70vh]","overflow-y-auto"],["for","title",1,"block","text-sm","font-medium","text-gray-700"],["id","title","type","text","formControlName","title","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],["for","imageUrl",1,"block","text-sm","font-medium","text-gray-700"],["id","imageUrl","type","url","formControlName","imageUrl",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],["for","shortStory",1,"block","text-sm","font-medium","text-gray-700"],["id","shortStory","formControlName","shortStory","rows","5","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],["for","detailedStory",1,"block","text-sm","font-medium","text-gray-700"],["id","detailedStory","formControlName","detailedStory","rows","8",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],[1,"text-xs","text-gray-500","mt-1"],["for","mappedMonth",1,"block","text-sm","font-medium","text-gray-700"],["id","mappedMonth","formControlName","mappedMonth",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],["value",""],[3,"value"],[1,"p-6","bg-gray-50","flex","justify-end","gap-3","rounded-b-lg"],["type","button",1,"px-4","py-2","bg-gray-200","text-gray-800","rounded-md","hover:bg-gray-300","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","bg-primary-blue","text-white","rounded-md","hover:bg-accent-blue","transition-colors","disabled:bg-gray-400",3,"disabled"]],template:function(e,n){e&1&&(i(0,"section",0)(1,"div",1)(2,"h2",2),r(3,"Manage Missionary Spotlight"),t(),i(4,"button",3),s("click",function(){return n.openModal()}),N(),i(5,"svg",4),m(6,"path",5),t(),r(7," Add Story "),t()(),V(),i(8,"div",6)(9,"span",7),r(10,"Show:"),t(),i(11,"button",8),s("click",function(){return n.filter.set("all")}),r(12,"All"),t(),i(13,"button",8),s("click",function(){return n.filter.set("unmapped")}),r(14,"Unmapped"),t(),i(15,"button",8),s("click",function(){return n.filter.set("mapped")}),r(16,"Mapped"),t()(),i(17,"div",9),v(18,X,10,5,"div",10,K,!1,Z,3,0,"div",11),t()(),_(21,te,38,2,"div",12)),e&2&&(d(11),y("bg-primary-blue",n.filter()==="all")("text-white",n.filter()==="all")("bg-gray-200",n.filter()!=="all"),d(2),y("bg-primary-blue",n.filter()==="unmapped")("text-white",n.filter()==="unmapped")("bg-gray-200",n.filter()!=="unmapped"),d(2),y("bg-primary-blue",n.filter()==="mapped")("text-white",n.filter()==="mapped")("bg-gray-200",n.filter()!=="mapped"),d(3),w(n.filteredStories()),d(3),S(n.isModalVisible()?21:-1))},dependencies:[H,q,R,B,A,z,O,$,J,G,P,I],encapsulation:2,changeDetection:0});var Y=c;export{Y as MissionManagerComponent};
