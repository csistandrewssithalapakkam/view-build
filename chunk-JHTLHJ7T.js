import{a as A}from"./chunk-6CAQXIVX.js";import{a as I,c as V,d as $,e as B,f as G,g as j,h as J,i as O,j as H,l as z,m as K}from"./chunk-T443B6IA.js";import{Fa as q,Ib as R,Oa as F,Pa as N,Qa as P,Ra as f,S as h,Sa as g,Ta as M,Ua as r,Va as t,Wa as k,X as w,Y as C,_a as D,ab as u,cb as v,ea as E,hb as S,ib as o,jb as y,kb as b,pb as x,qb as _,sa as l,ub as T}from"./chunk-WFMH5ZIS.js";var Q=(a,n)=>n.id;function U(a,n){if(a&1){let e=D();r(0,"div",7)(1,"div",9)(2,"p",10),o(3),t(),r(4,"p",11),o(5),x(6,"date"),t()(),r(7,"button",12),u("click",function(){let s=w(e).$implicit,c=v(2);return C(c.markActionTaken(s.id))}),o(8," Mark as Action Taken "),t()()}if(a&2){let e=n.$implicit;l(3),y(e.request),l(2),b("Submitted: ",_(6,2,e.submittedDate,"medium"))}}function W(a,n){a&1&&(r(0,"div",8)(1,"p",13),o(2,"No active prayer requests."),t()())}function X(a,n){if(a&1&&(r(0,"div",6),f(1,U,9,5,"div",7,Q,!1,W,3,0,"div",8),t()),a&2){let e=v();l(),g(e.activeRequests())}}function Y(a,n){if(a&1&&(r(0,"option",18),o(1),t()),a&2){let e=n.$implicit,i=n.$index;M("value",i),l(),y(e)}}function Z(a,n){if(a&1&&(r(0,"div",24)(1,"p",10),o(2),t(),r(3,"div",25)(4,"span"),o(5),x(6,"date"),t(),r(7,"span"),o(8),x(9,"date"),t()()()),a&2){let e=n.$implicit;l(2),y(e.request),l(3),b("Submitted: ",_(6,3,e.submittedDate,"medium")),l(3),b("Action Taken: ",_(9,6,e.actionTakenDate,"medium"))}}function ee(a,n){a&1&&(r(0,"div",8)(1,"p",13),o(2,"No archived prayer requests match the current filters."),t()())}function te(a,n){if(a&1){let e=D();r(0,"div")(1,"form",14)(2,"div")(3,"label",15),o(4,"Month"),t(),r(5,"select",16)(6,"option",17),o(7,"All Months"),t(),f(8,Y,2,2,"option",18,P),t()(),r(10,"div")(11,"label",19),o(12,"Start Date"),t(),k(13,"input",20),t(),r(14,"div")(15,"label",21),o(16,"End Date"),t(),k(17,"input",22),t(),r(18,"button",23),u("click",function(){w(e);let s=v();return C(s.clearFilters())}),o(19," Clear Filters "),t()(),r(20,"div",6),f(21,Z,10,9,"div",24,Q,!1,ee,3,0,"div",8),t()()}if(a&2){let e=v();l(),M("formGroup",e.filterForm),l(7),g(e.months),l(13),g(e.archivedRequests())}}var p=class p{constructor(){this.fb=h(z);this.prayerRequestService=h(A);this.viewMode=E("active");this.filterForm=this.fb.group({month:[""],startDate:[""],endDate:[""]});this.activeRequests=T(()=>this.prayerRequestService.prayerRequests().filter(n=>!n.isActionTaken));this.archivedRequests=T(()=>{let n=this.prayerRequestService.prayerRequests().filter(d=>d.isActionTaken),{month:e,startDate:i,endDate:s}=this.filterForm.value,c=n;if(e){let d=parseInt(e,10);c=c.filter(m=>m.actionTakenDate&&m.actionTakenDate.getMonth()===d)}if(i){let d=new Date(i);d.setHours(0,0,0,0),c=c.filter(m=>m.actionTakenDate&&m.actionTakenDate>=d)}if(s){let d=new Date(s);d.setHours(23,59,59,999),c=c.filter(m=>m.actionTakenDate&&m.actionTakenDate<=d)}return c.sort((d,m)=>(m.actionTakenDate?.getTime()??0)-(d.actionTakenDate?.getTime()??0))});this.months=["January","February","March","April","May","June","July","August","September","October","November","December"]}markActionTaken(n){this.prayerRequestService.markActionTaken(n)}clearFilters(){this.filterForm.reset({month:"",startDate:"",endDate:""})}};p.\u0275fac=function(e){return new(e||p)},p.\u0275cmp=q({type:p,selectors:[["app-prayer-manager"]],decls:12,vars:26,consts:[[1,"bg-white","p-8","rounded-lg","shadow"],[1,"text-2xl","font-bold","text-gray-800","mb-6"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-8"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"mt-6"],[1,"space-y-4"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4","flex","flex-col","sm:flex-row","justify-between","sm:items-center","gap-4"],[1,"text-center","py-8","px-4","border-2","border-dashed","rounded-lg"],[1,"flex-grow"],[1,"text-gray-800"],[1,"text-xs","text-gray-500","mt-2"],[1,"px-3","py-1.5","bg-green-500","text-white","font-semibold","rounded-md","hover:bg-green-600","transition-colors","text-sm","flex-shrink-0",3,"click"],[1,"text-gray-500"],[1,"p-4","mb-6","border","rounded-lg","bg-gray-50","grid","grid-cols-1","md:grid-cols-4","gap-4","items-end",3,"formGroup"],["for","month",1,"block","text-sm","font-medium","text-gray-700"],["id","month","formControlName","month",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],["value",""],[3,"value"],["for","startDate",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","startDate","formControlName","startDate",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],["for","endDate",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","endDate","formControlName","endDate",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-accent-blue","focus:border-accent-blue"],["type","button",1,"w-full","md:w-auto","px-4","py-2","bg-gray-600","text-white","font-semibold","rounded-md","hover:bg-gray-700","transition-colors",3,"click"],[1,"bg-gray-100","border","rounded-lg","p-4"],[1,"flex","flex-col","sm:flex-row","justify-between","sm:items-center","text-xs","text-gray-500","mt-2","gap-2"]],template:function(e,i){e&1&&(r(0,"section",0)(1,"h2",1),o(2,"Manage Prayer Requests"),t(),r(3,"div",2)(4,"nav",3)(5,"button",4),u("click",function(){return i.viewMode.set("active")}),o(6),t(),r(7,"button",4),u("click",function(){return i.viewMode.set("archived")}),o(8," Archived Requests "),t()()(),r(9,"div",5),F(10,X,4,1,"div",6)(11,te,24,2,"div"),t()()),e&2&&(l(5),S("border-primary-blue",i.viewMode()==="active")("text-primary-blue",i.viewMode()==="active")("border-transparent",i.viewMode()!=="active")("text-gray-500",i.viewMode()!=="active")("hover:text-gray-700",i.viewMode()!=="active")("hover:border-gray-300",i.viewMode()!=="active"),l(),b(" Active Requests (",i.activeRequests().length,") "),l(),S("border-primary-blue",i.viewMode()==="archived")("text-primary-blue",i.viewMode()==="archived")("border-transparent",i.viewMode()!=="archived")("text-gray-500",i.viewMode()!=="archived")("hover:text-gray-700",i.viewMode()!=="archived")("hover:border-gray-300",i.viewMode()!=="archived"),l(3),N(i.viewMode()==="active"?10:11))},dependencies:[K,B,O,H,I,J,V,$,G,j,R],encapsulation:2,changeDetection:0});var L=p;export{L as PrayerManagerComponent};
