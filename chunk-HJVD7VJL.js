import{a as P,b as T}from"./chunk-XDQVYKID.js";import{a as A,b as f,c as U,d as D,e as $,f as j,g as q,h as B,i as R,j as z,l as L,m as H}from"./chunk-T443B6IA.js";import{Fa as V,Nb as k,Oa as p,Pa as u,Qa as E,Ra as v,S,Sa as b,Ta as y,Ua as n,Va as t,Wa as _,X as s,Y as g,Z as F,_ as N,_a as x,ab as c,cb as m,ea as M,hb as G,ib as l,jb as I,sa as a}from"./chunk-WFMH5ZIS.js";var J=(i,o)=>o.name;function K(i,o){if(i&1&&(n(0,"option",12),l(1),t()),i&2){let e=o.$implicit;y("value",e.name),a(),I(e.name)}}function Q(i,o){i&1&&(n(0,"p",13),l(1,"Please select a category."),t())}function W(i,o){i&1&&(n(0,"p",13),l(1,"Please enter a valid image URL."),t())}function X(i,o){if(i&1){let e=x();n(0,"div",28),c("click",function(){let d=s(e).$index,h=m(2).$implicit,w=m(2);return g(w.openImagePreview(h,d))}),_(1,"img",29),n(2,"div",30)(3,"button",31),c("click",function(d){let h=s(e).$implicit,w=m(2).$implicit;return m(2).removePhoto(w.name,h),g(d.stopPropagation())}),F(),n(4,"svg",32),_(5,"path",33),t()()()()}if(i&2){let e=o.$implicit;a(),y("ngSrc",e)}}function Y(i,o){if(i&1&&(n(0,"div",25),v(1,X,6,1,"div",27,E),t()),i&2){let e=m().$implicit;a(),b(e.images)}}function Z(i,o){i&1&&(n(0,"p",26),l(1,"This category is empty. Add photos using the form above."),t())}function ee(i,o){if(i&1&&(n(0,"div")(1,"h4",24),l(2),t(),p(3,Y,3,0,"div",25)(4,Z,2,0,"p",26),t()),i&2){let e=o.$implicit;a(2),I(e.name),a(),u(e.images.length>0?3:4)}}function te(i,o){if(i&1&&(n(0,"div",20),v(1,ee,5,2,"div",null,J),t()),i&2){let e=m();a(),b(e.galleryService.galleryCategories())}}function ie(i,o){i&1&&(n(0,"p",21),l(1,"No categories found. Please add a category to begin."),t())}function ne(i,o){i&1&&(n(0,"p",13),l(1,"Category name is required."),t())}function oe(i,o){if(i&1){let e=x();n(0,"div",34),c("click",function(){s(e);let d=m();return g(d.closeAddCategoryModal())}),n(1,"div",35),c("click",function(d){return s(e),g(d.stopPropagation())}),n(2,"h3",36),l(3,"Add New Category"),t(),n(4,"form",37),c("ngSubmit",function(){s(e);let d=m();return g(d.addNewCategory())}),n(5,"div")(6,"label",38),l(7,"Category Name"),t(),_(8,"input",39),p(9,ne,2,0,"p",13),t(),n(10,"div",40)(11,"button",41),c("click",function(){s(e);let d=m();return g(d.closeAddCategoryModal())}),l(12," Cancel "),t(),n(13,"button",42),l(14," Add Category "),t()()()()()}if(i&2){let e=m();a(4),y("formGroup",e.newCategoryForm),a(5),u(e.newCategoryForm.controls.name.invalid&&e.newCategoryForm.controls.name.touched?9:-1),a(4),y("disabled",e.newCategoryForm.invalid)}}function re(i,o){if(i&1){let e=x();n(0,"app-image-preview",43),c("close",function(){s(e);let d=m();return g(d.closeImagePreview())}),t()}if(i&2){let e=o;y("images",e.images)("startIndex",e.index)}}var C=class C{constructor(){this.fb=S(L);this.galleryService=S(P);this.isAddCategoryModalVisible=M(!1);this.newCategoryForm=this.fb.group({name:["",f.required]});this.selectedImageForPreview=M(null);this.addImageForm=this.fb.group({categoryName:["",f.required],imageUrl:["",[f.required,f.pattern("https?://.+")]]})}openAddCategoryModal(){this.isAddCategoryModalVisible.set(!0),this.newCategoryForm.reset()}closeAddCategoryModal(){this.isAddCategoryModalVisible.set(!1)}addNewCategory(){if(this.newCategoryForm.valid){let{name:o}=this.newCategoryForm.getRawValue();this.galleryService.addCategory(o),this.closeAddCategoryModal()}}openImagePreview(o,e){this.selectedImageForPreview.set({images:o.images,index:e})}closeImagePreview(){this.selectedImageForPreview.set(null)}addPhoto(){if(this.addImageForm.valid){let{categoryName:o,imageUrl:e}=this.addImageForm.getRawValue();this.galleryService.addImage(o,e),this.addImageForm.reset(),this.addImageForm.controls.categoryName.setValue("")}}removePhoto(o,e){confirm("Are you sure you want to delete this photo?")&&this.galleryService.removeImage(o,e)}};C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=V({type:C,selectors:[["app-gallery-manager"]],decls:37,vars:11,consts:[[1,"bg-white","p-8","rounded-lg","shadow"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"px-4","py-2","bg-green-500","text-white","font-semibold","rounded-md","hover:bg-green-600","transition-colors","flex","items-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"],[1,"mb-8","p-6","border","rounded-lg","bg-gray-50",3,"ngSubmit","formGroup"],[1,"text-lg","font-semibold","text-gray-700","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-4","items-start"],["for","categoryName",1,"sr-only"],["id","categoryName","formControlName","categoryName",1,"w-full","px-4","py-2","border","border-gray-300","bg-white","text-gray-900","rounded-md","focus:ring-accent-blue","focus:border-accent-blue"],["value","","disabled",""],[3,"value"],[1,"text-sm","text-red-500","mt-1"],[1,"sm:col-span-2"],[1,"flex","gap-4"],[1,"flex-grow"],["for","imageUrl",1,"sr-only"],["id","imageUrl","type","url","formControlName","imageUrl","placeholder","https://example.com/image.jpg",1,"w-full","px-4","py-2","border","border-gray-300","bg-white","text-gray-900","placeholder-gray-500","rounded-md","focus:ring-accent-blue","focus:border-accent-blue"],["type","submit",1,"px-6","py-2","bg-primary-blue","text-white","font-semibold","rounded-md","hover:bg-accent-blue","transition-colors","disabled:bg-gray-400","disabled:cursor-not-allowed",3,"disabled"],[1,"space-y-8"],[1,"text-gray-500"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm"],[3,"images","startIndex"],[1,"text-md","font-semibold","text-gray-600","mb-3","pb-2","border-b"],[1,"grid","grid-cols-2","md:grid-cols-4","lg:grid-cols-6","gap-4"],[1,"text-gray-500","text-sm"],[1,"relative","group","overflow-hidden","rounded-lg","shadow-md","aspect-square","cursor-pointer"],[1,"relative","group","overflow-hidden","rounded-lg","shadow-md","aspect-square","cursor-pointer",3,"click"],["alt","Gallery image","width","300","height","300",1,"w-full","h-full","object-cover",3,"ngSrc"],[1,"absolute","inset-0","bg-black/50","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-center","justify-center"],["aria-label","Delete photo",1,"text-white","p-2","rounded-full","hover:bg-red-500/80","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm",3,"click"],[1,"bg-white","rounded-lg","shadow-2xl","w-full","max-w-md","m-4","p-6",3,"click"],[1,"text-xl","font-bold","font-serif","mb-4","text-gray-800"],[3,"ngSubmit","formGroup"],["for","newCategoryName",1,"sr-only"],["id","newCategoryName","type","text","formControlName","name","placeholder","Enter new category name","autofocus","",1,"w-full","px-3","py-2","border","border-gray-300","bg-white","text-gray-900","rounded-md","focus:outline-none","focus:ring-2","focus:ring-accent-blue"],[1,"mt-6","flex","justify-end","gap-3"],["type","button",1,"px-4","py-2","bg-gray-200","text-gray-800","rounded-md","hover:bg-gray-300","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","bg-primary-blue","text-white","rounded-md","hover:bg-accent-blue","transition-colors","disabled:bg-gray-400",3,"disabled"],[3,"close","images","startIndex"]],template:function(e,r){if(e&1&&(n(0,"section",0)(1,"div",1)(2,"h2",2),l(3,"Manage Photo Gallery"),t(),n(4,"button",3),c("click",function(){return r.openAddCategoryModal()}),F(),n(5,"svg",4),_(6,"path",5),t(),l(7," Add Category "),t()(),N(),n(8,"form",6),c("ngSubmit",function(){return r.addPhoto()}),n(9,"h3",7),l(10,"Add a New Photo"),t(),n(11,"div",8)(12,"div")(13,"label",9),l(14,"Category"),t(),n(15,"select",10)(16,"option",11),l(17,"Select a Category"),t(),v(18,K,2,2,"option",12,J),t(),p(20,Q,2,0,"p",13),t(),n(21,"div",14)(22,"div",15)(23,"div",16)(24,"label",17),l(25,"Image URL"),t(),_(26,"input",18),t(),n(27,"button",19),l(28," Add Photo "),t()(),p(29,W,2,0,"p",13),t()()(),n(30,"div")(31,"h3",7),l(32,"Current Gallery Photos"),t(),p(33,te,3,0,"div",20)(34,ie,2,0,"p",21),t()(),p(35,oe,15,3,"div",22),p(36,re,1,2,"app-image-preview",23)),e&2){let d;a(8),y("formGroup",r.addImageForm),a(7),G("border-red-500",r.addImageForm.controls.categoryName.invalid&&r.addImageForm.controls.categoryName.touched),a(3),b(r.galleryService.galleryCategories()),a(2),u(r.addImageForm.controls.categoryName.invalid&&r.addImageForm.controls.categoryName.touched?20:-1),a(6),G("border-red-500",r.addImageForm.controls.imageUrl.invalid&&r.addImageForm.controls.imageUrl.touched),a(),y("disabled",r.addImageForm.invalid),a(2),u(r.addImageForm.controls.imageUrl.invalid&&r.addImageForm.controls.imageUrl.touched?29:-1),a(4),u(r.galleryService.galleryCategories().length>0?33:34),a(2),u(r.isAddCategoryModalVisible()?35:-1),a(),u((d=r.selectedImageForPreview())?36:-1,d)}},dependencies:[H,$,R,z,A,B,U,D,j,q,k,T],encapsulation:2,changeDetection:0});var O=C;export{O as GalleryManagerComponent};
